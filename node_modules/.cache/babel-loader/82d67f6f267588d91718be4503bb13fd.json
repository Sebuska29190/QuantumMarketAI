{"ast":null,"code":"import _slicedToArray from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Avatar,ButtonBase,Card,CardActions,CardContent,CardHeader,Divider,FormControl,Grid,InputLabel,MenuItem,Select,Stack,Typography,Tooltip as MuiTooltip}from'@mui/material';import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{retrieveCoinDetailAction}from'../store/coinDetailSlice';import{useAppDispatch,useAppSelector}from'../store/hooks';import ArrowDropUpIcon from'@mui/icons-material/ArrowDropUp';import ArrowDropDownIcon from'@mui/icons-material/ArrowDropDown';import TwitterIcon from'@mui/icons-material/Twitter';import RedditIcon from'@mui/icons-material/Reddit';import FacebookIcon from'@mui/icons-material/Facebook';import LanguageIcon from'@mui/icons-material/Language';import YouTubeIcon from'@mui/icons-material/YouTube';import LinkedInIcon from'@mui/icons-material/LinkedIn';import GitHubIcon from'@mui/icons-material/GitHub';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{Line}from'react-chartjs-2';import{Box}from'@mui/system';import CoinDetailSkeleton from'../components/CoinDetailSkeleton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);export var options={responsive:true,plugins:{legend:{display:false},title:{display:true,text:'Price History'}}};var TitleHeader=function TitleHeader(_ref){var name=_ref.name,change=_ref.change;return/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",marginRight:4,children:name}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[change>0?/*#__PURE__*/_jsx(ArrowDropUpIcon,{color:\"success\"}):/*#__PURE__*/_jsx(ArrowDropDownIcon,{color:\"error\"}),change>0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"green\",children:change}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"red\",children:change*-1})]})]});};function CoinDetail(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"3h\"),_useState4=_slicedToArray(_useState3,2),timePeriod=_useState4[0],setTimePeriod=_useState4[1];// used for chartjs changing period\nvar _useAppSelector=useAppSelector(function(state){return state.coinDetail;}),data=_useAppSelector.data,history=_useAppSelector.history;var navbarState=useAppSelector(function(state){return state.navbar;});var dispatch=useAppDispatch();var _useParams=useParams(),id=_useParams.id;useEffect(function(){var _navbarState$stats;if(!((_navbarState$stats=navbarState.stats)!==null&&_navbarState$stats!==void 0&&_navbarState$stats.data))return;// wait until navbar call is resolved to get some data\nvar subscription=retrieveCoinDetailAction(dispatch,{referenceCurrencyUuid:navbarState.selectedCurrency.uuid,timePeriod:timePeriod},id).subscribe(function(_){setLoading(false);});return function(){subscription.unsubscribe();};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id,navbarState,timePeriod]);var historyData={// used for chartjs\nlabels:history.map(function(h){return new Date(h.timestamp*1000).toLocaleString();}),datasets:[{label:'Price',data:history.map(function(h){return parseInt(h.price,10);}),borderColor:data.color,backgroundColor:data.color}]};if(loading)return/*#__PURE__*/_jsx(CoinDetailSkeleton,{});return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:8,children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{\"aria-label\":\"recipe\",src:data.iconUrl||\"\",children:\"R\"}),title:/*#__PURE__*/_jsx(TitleHeader,{name:data.name,change:Number(data.change)}),subheader:data.symbol}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",dangerouslySetInnerHTML:{__html:data.description}}),/*#__PURE__*/_jsxs(\"section\",{style:{marginTop:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{style:{flexGrow:1}}),/*#__PURE__*/_jsxs(FormControl,{sx:{m:1,minWidth:100},children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-label\",children:\"Period\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"demo-simple-select-label\",id:\"demo-simple-select\",label:\"Period\",value:timePeriod,onChange:function onChange(e){return setTimePeriod(e.target.value);},children:[/*#__PURE__*/_jsx(MenuItem,{selected:true,value:\"3h\",children:\"3h\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"24h\",children:\"24h\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"7d\",children:\"7d\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"30d\",children:\"30d\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"1y\",children:\"1y\"})]})]})]}),/*#__PURE__*/_jsx(Line,{options:options,data:historyData})]})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Box,{style:{position:\"sticky\",top:\"55px\"},children:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{mb:2},fontWeight:\"bold\",children:\"Price & Stats\"}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:\"1.5rem\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"grey\",children:\"Price\"}),/*#__PURE__*/_jsx(Divider,{variant:\"fullWidth\",sx:{mb:2}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",flexGrow:1,children:[\"Price \",data.priceAt&&\"(\".concat(new Date(data.priceAt*1000).toLocaleDateString(),\")\")]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[navbarState.selectedCurrency.sign||navbarState.selectedCurrency.symbol,' ',Number(data.price).toFixed(2)]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",flexGrow:1,children:[\"Highest Price (\",new Date(data.allTimeHigh.timestamp*1000).toLocaleDateString(),\")\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[navbarState.selectedCurrency.sign||navbarState.selectedCurrency.symbol,' ',Number(data.allTimeHigh.price).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:\"1.5rem\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"grey\",children:\"Market\"}),/*#__PURE__*/_jsx(Divider,{variant:\"fullWidth\",sx:{mb:2}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Trading Vol. (24h)\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[navbarState.selectedCurrency.sign||navbarState.selectedCurrency.symbol,' ',Number(data['24hVolume']).toFixed(2)]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Market Cap.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[navbarState.selectedCurrency.sign||navbarState.selectedCurrency.symbol,' ',Number(data.marketCap).toFixed(2)]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Vol. / Market Cap.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",fontWeight:\"bold\",children:(Number(data['24hVolume'])/Number(data.marketCap)).toFixed(3)})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Market Dominanace\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[(Number(data.marketCap)/Number(navbarState.stats.data.totalMarketCap)*100).toFixed(3),\"%\"]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Number Of Markets\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",fontWeight:\"bold\",children:data.numberOfMarkets})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Number Of Exchanges\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",fontWeight:\"bold\",children:data.numberOfExchanges})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Rank\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[\"#\",data.rank]})]})]}),/*#__PURE__*/_jsxs(\"section\",{style:{marginBottom:\"1.5rem\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"grey\",children:\"Supply\"}),/*#__PURE__*/_jsx(Divider,{variant:\"fullWidth\",sx:{mb:2}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Circulating\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",fontWeight:\"bold\",children:[data.supply.circulating,' ',data.symbol]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",flexGrow:1,children:\"Total\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",fontWeight:\"bold\",children:data.supply.total?data.supply.total+' '+data.symbol:'N/A'})]})]})]}),/*#__PURE__*/_jsx(CardActions,{sx:{flexWrap:\"wrap\"},children:data.links.map(function(link){var linkIcon=/*#__PURE__*/_jsx(LanguageIcon,{});switch(link.type){case'reddit':linkIcon=/*#__PURE__*/_jsx(RedditIcon,{sx:{color:\"#FF5700\"}});break;case'facebook':linkIcon=/*#__PURE__*/_jsx(FacebookIcon,{sx:{color:\"##3b5998\"}});break;case'twitter':linkIcon=/*#__PURE__*/_jsx(TwitterIcon,{sx:{color:\"#00acee\"}});break;case'linkedin':linkIcon=/*#__PURE__*/_jsx(LinkedInIcon,{sx:{color:\"#0077b5\"}});break;case'youtube':linkIcon=/*#__PURE__*/_jsx(YouTubeIcon,{color:\"error\"});break;case'github':linkIcon=/*#__PURE__*/_jsx(GitHubIcon,{});}return/*#__PURE__*/_jsx(MuiTooltip,{title:link.name,children:/*#__PURE__*/_jsx(ButtonBase,{sx:{mx:2,my:1},href:link.url,target:\"_blank\",children:linkIcon})},link.url);})})]})})})})]});}export default CoinDetail;","map":null,"metadata":{},"sourceType":"module"}