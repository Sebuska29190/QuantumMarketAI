{"ast":null,"code":"import _classCallCheck from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{mergeMap,of,throwError}from\"rxjs\";import{fromFetch}from\"rxjs/fetch\";import BaseService from\"./baseService\";var CoinDetailService=/*#__PURE__*/function(_BaseService){_inherits(CoinDetailService,_BaseService);var _super=_createSuper(CoinDetailService);function CoinDetailService(){var _this;_classCallCheck(this,CoinDetailService);_this=_super.call(this,'https://coinranking1.p.rapidapi.com/coin',{timePeriod:'3h'});_this.options=void 0;_this.options={headers:{'x-rapidapi-host':process.env.REACT_APP_RAPID_API_COINRANKING_HOST,'x-rapidapi-key':process.env.REACT_APP_RAPID_API_COINRANKING_KEY}};return _this;}_createClass(CoinDetailService,[{key:\"getUrlWithParams\",value:function getUrlWithParams(queryParams,id){var url=new URL(\"\".concat(this.endpoint,\"/\").concat(id));for(var key in queryParams){url.searchParams.set(key,queryParams[key]);}return url.href;}},{key:\"retrieve\",value:function retrieve(){var _this2=this;var queryParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var id=arguments.length>1?arguments[1]:undefined;var qp=this.getQueryParams(queryParams);var url=this.getUrlWithParams(qp,id);if(this.isCacheResponseValid(url)){return of(this.getFromCache(url));}return fromFetch(url,this.options).pipe(mergeMap(function(res){if(res.ok){return res.json();}else{return throwError(function(){return new Error(res.statusText);});}}),mergeMap(function(res){var data=res['data']['coin'];_this2.putInCache(data,url,5);return of(data);}));}}]);return CoinDetailService;}(BaseService);export{CoinDetailService as default};","map":null,"metadata":{},"sourceType":"module"}