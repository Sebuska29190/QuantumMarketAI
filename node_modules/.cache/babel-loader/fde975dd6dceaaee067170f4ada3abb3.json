{"ast":null,"code":"import _classCallCheck from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/sebastian/Pobrane/cryptowatch/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{mergeMap,of,throwError}from\"rxjs\";import{fromFetch}from\"rxjs/fetch\";import BaseService from\"./baseService\";var NewsService=/*#__PURE__*/function(_BaseService){_inherits(NewsService,_BaseService);var _super=_createSuper(NewsService);function NewsService(){var _this;_classCallCheck(this,NewsService);_this=_super.call(this,'https://free-news.p.rapidapi.com/v1/search',{q:'cryptocurrencies',lang:'en',page:'1',page_size:'24'});_this.options=void 0;_this.options={headers:{'x-rapidapi-host':process.env.REACT_APP_RAPID_API_FREENEWS_HOST,'x-rapidapi-key':process.env.REACT_APP_RAPID_API_FREENEWS_KEY}};return _this;}_createClass(NewsService,[{key:\"getQueryParams\",value:function getQueryParams(queryParams){queryParams['q']=queryParams['q']||this.queryParams['q'];return _get(_getPrototypeOf(NewsService.prototype),\"getQueryParams\",this).call(this,queryParams);}},{key:\"retrieve\",value:function retrieve(){var _this2=this;var queryParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var qp=this.getQueryParams(queryParams);if(qp['page']>4)return of([]);var url=this.getUrl(qp);// get response from cache if time passed is less then 5min from the first call\nif(this.isCacheResponseValid(url)){return of(this.getFromCache(url));}return fromFetch(url,this.options).pipe(mergeMap(function(res){if(res.ok){return res.json();}else{return throwError(function(){return new Error(res.statusText);});}}),mergeMap(function(res){_this2.putInCache(res['articles'],url,5);// save response in cache for 5min\nreturn of(res['articles']);}));// return from(this.fetchFakeData(news.articles, 1000));\n}}]);return NewsService;}(BaseService);export{NewsService as default};","map":null,"metadata":{},"sourceType":"module"}